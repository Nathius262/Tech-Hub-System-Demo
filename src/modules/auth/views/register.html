<main class="py-5 my-5">
  <div class="container login-container">
    <!-- Logo -->
    <div class="text-center mb-4">
      <img width="150" src="https://via.placeholder.com/150x60/105341/ffffff?text=Petra+ICT+Hub" alt="Petra ICT Hub">
    </div>

    <!-- Role Toggle -->
    <div class="btn-group mb-4 w-100 d-flex justify-content-center" role="group" aria-label="Role toggle">
      <button type="button" class="btn btn-outline-primary role-btn active" data-role="user">User</button>
      <button type="button" class="btn btn-outline-primary role-btn" data-role="staff">Staff</button>
    </div>

    <!-- Heading -->
    <h2 class="text-center mb-4" >Register as <span id="roleHeading">User</span></h2>

    <!-- Form -->
    <form id="authForm" class="needs-validation" novalidate>
      <div class="form-group mb-3">
        <input type="text" name="first_name" class="form-control" placeholder="First Name" required>
        <div class="invalid-feedback">First name is required</div>
      </div>

      <div class="form-group mb-3">
        <input type="text" name="last_name" class="form-control" placeholder="Last Name" required>
        <div class="invalid-feedback">Last name is required</div>
      </div>

      <div class="form-group mb-3">
        <input type="email" name="email" class="form-control" placeholder="Email Address" required>
        <div class="invalid-feedback">Email is required</div>
      </div>

      <div class="form-group mb-3">
        <input type="tel" name="phone_number" class="form-control" placeholder="Phone Number" required>
        <div class="invalid-feedback">Phone number is required</div>
      </div>

      <div class="form-group mb-3" style="position: relative;">
        <input type="password" name="password" class="form-control" placeholder="Password" required>
        <i class="fa-regular fa-eye password-toggle"></i>
        <div class="invalid-feedback">Password is required</div>
      </div>

      <div class="form-group mb-3" style="position: relative;">
        <input type="password" name="confirm_password" class="form-control" placeholder="Confirm Password" required>
        <i class="fa-regular fa-eye password-toggle"></i>
        <div class="invalid-feedback">Please confirm your password</div>
      </div>

      <ul id="error" class="text-danger col-12 mb-3"></ul>

      <div class="spinner-border text-primary col-12 d-none mb-3" id="status" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>

      <button type="submit" class="login-btn">Register</button>
    </form>

    <div class="text-center mt-3">
      <a class="small text-primary text-decoration-none" href="/auth/login">Already have an account? Login</a>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Role toggle functionality
      const roleButtons = document.querySelectorAll('.role-btn');
      const roleHeading = document.getElementById('roleHeading');
      const authForm = document.getElementById('authForm');
      
      roleButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Remove active class from all buttons
          roleButtons.forEach(btn => btn.classList.remove('active'));
          
          // Add active class to clicked button
          this.classList.add('active');
          
          // Update heading
          const role = this.getAttribute('data-role');
          roleHeading.textContent = role.charAt(0).toUpperCase() + role.slice(1);
          
          // Update form action
          authForm.action = `/auth/${role}/register`;
        });
      });
      
      // Password visibility toggle
      const passwordToggles = document.querySelectorAll('.password-toggle');
      
      passwordToggles.forEach(toggle => {
        toggle.addEventListener('click', function() {
          const passwordInput = this.previousElementSibling;
          
          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            this.classList.remove('fa-eye');
            this.classList.add('fa-eye-slash');
          } else {
            passwordInput.type = 'password';
            this.classList.remove('fa-eye-slash');
            this.classList.add('fa-eye');
          }
        });
      });
      
      // Form validation
      authForm.addEventListener('submit', function(event) {
        if (!this.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        
        this.classList.add('was-validated');
        
        // If form is valid, show loading spinner
        // if (this.checkValidity()) {
        //   document.getElementById('status').classList.remove('d-none');
        //   document.querySelector('.login-btn').disabled = true;
        // }
      });
    });
  </script>
</main>

<script type="module" src="/assets/js/authenticate.js"></script>