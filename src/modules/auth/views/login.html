<!-- Login Section -->
<main class="py-5 my-5">
  <div class="login-container">
    <!-- Logo -->
    <div class="text-center mb-4">
      <img width="150" src="/assets/img/logo.png" alt="TechHub Logo">
    </div>

    <!-- Role Toggle -->
    <div class="btn-group mb-4 w-100 d-flex justify-content-center" role="group" aria-label="Role toggle">
      <button type="button" class="btn btn-outline-primary role-btn active" data-role="admin">Admin</button>
      <button type="button" class="btn btn-outline-primary role-btn" data-role="user">User</button>
      <button type="button" class="btn btn-outline-primary role-btn" data-role="staff">Staff</button>
    </div>

    <!-- Heading -->
    <h2 style="color:#800020; text-align:center;" class="mb-4">Welcome Back <span id="roleHeading">Admin</span>!</h2>

    <!-- Form -->
    <form id="authForm" class="needs-validation" novalidate>
      <div class="form-group mb-3">
        <input type="email" name="email" class="form-control" placeholder="Email Address" required>
        <div class="invalid-feedback">Email is required</div>
      </div>

      <div class="form-group mb-3" style="position: relative;">
        <input type="password" name="password" class="form-control" placeholder="Password" required>
        <i class="fa-regular fa-eye password-toggle"></i>
        <div class="invalid-feedback">Password is required</div>
      </div>

      <ul id="error" class="text-danger col-12 mb-3"></ul>

      <div class="spinner-border text-primary col-12 d-none mb-3" id="status" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>

      <button type="submit" class="login-btn">Login</button>
    </form>

    <div class="text-center mt-3">
      <a class="small text-primary text-decoration-none" href="/auth/forgot-password">Forgot Password?</a>
    </div>
    <div class="text-center">
      <a class="small text-primary text-decoration-none" id="registerLink" href="/auth/register">Create an Account!</a>
    </div>
  </div>
</main>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Password visibility toggle
    const passwordToggle = document.querySelector('.password-toggle');
    const passwordInput = document.querySelector('input[name="password"]');

    passwordToggle.addEventListener('click', function () {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        this.classList.remove('fa-eye');
        this.classList.add('fa-eye-slash');
      } else {
        passwordInput.type = 'password';
        this.classList.remove('fa-eye-slash');
        this.classList.add('fa-eye');
      }
    });

    // Form validation
    authForm.addEventListener('submit', function (event) {
      if (!this.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }

      this.classList.add('was-validated');

      // // If form is valid, show loading spinner
      // if (this.checkValidity()) {
      //   document.getElementById('status').classList.remove('d-none');
      //   document.querySelector('.login-btn').disabled = true;
      // }
    });
  });
</script>

<script type="module" src="/assets/js/authenticate.js"></script>